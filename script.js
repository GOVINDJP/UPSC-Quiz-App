const quizData = {
        "question1": {
            "question": "In which one of the following regions was Dhanyakataka, a prominent Buddhist centre under the Mahasanghikas, located? (UPSC 2023)",
            "options": ["Andhra", "Gandhara", "Kalinga", "Magadha"],
            "answer": "Andhra"
        },
        "question2": {
            "question": "With reference to ancient India, how many of the following statements are correct? 1. The concept of Stupa is Buddhist in origin. 2. Stupa was generally a repository of relics. 3. Stupa was a votive structure. (UPSC 2023)",
            "options": ["Only one", "Only two", "All three", "None"],
            "answer": "All three"
        },
        "question3": {
            "question": "Which country, suffering from civil strife and food shortages, was in news for a severe famine recently? (UPSC 2023)",
            "options": ["Angola", "Costa Rica", "Ecuador", "Yemen"],
            "answer": "Yemen"
        },
        "question4": {
            "question": "In India, which institution maintains price stability by controlling money supply? (UPSC 2022)",
            "options": ["Department of Economic Affairs", "Reserve Bank of India", "India Development Bank", "State Bank of India"],
            "answer": "Reserve Bank of India"
        },
        "question5": {
            "question": "The term ‘Ulgulan’ or Great Tumult in Indian history is associated with which rebellion? (UPSC 2022)",
            "options": ["Munda Rebellion", "Santhal Rebellion", "Indigo Revolt", "Rampa Rebellion"],
            "answer": "Munda Rebellion"
        },
        "question6": {
            "question": "Which of the following is a part of the Congo Basin? (UPSC 2022)",
            "options": ["Cameroon", "Nigeria", "South Sudan", "Uganda"],
            "answer": "Cameroon"
        },
        "question7": {
            "question": "Which of the following statements is/are correct? 1. The Government of India provides MSP for niger seeds. 2. Niger is an oilseed crop grown in tribal areas. (UPSC 2023)",
            "options": ["1 only", "2 only", "Both 1 and 2", "Neither 1 nor 2"],
            "answer": "Both 1 and 2"
        },
        "question8": {
            "question": "With reference to ‘Eco-Sensitive Zones’, which statement is correct? 1. They act as buffers around protected areas. 2. All activities are banned within them. (UPSC 2021)",
            "options": ["1 only", "2 only", "Both 1 and 2", "Neither 1 nor 2"],
            "answer": "1 only"
        },
        "question9": {
            "question": "Which language was granted classical status by the Government of India in 2023? (UPSC 2023)",
            "options": ["Marathi", "Bengali", "Assamese", "Pali"],
            "answer": "Marathi"
        },
        "question10": {
            "question": "The ‘Global Gender Gap Report’ is published by which organization? (UPSC 2022)",
            "options": ["UNDP", "World Economic Forum", "World Bank", "ILO"],
            "answer": "World Economic Forum"
        },
        "question11": {
            "question": "Which river does NOT originate in India? (UPSC 2021)",
            "options": ["Ganga", "Brahmaputra", "Yamuna", "Godavari"],
            "answer": "Brahmaputra"
        },
        "question12": {
            "question": "Which Article of the Constitution deals with the imposition of President’s Rule in a state? (UPSC 2020)",
            "options": ["Article 352", "Article 356", "Article 360", "Article 370"],
            "answer": "Article 356"
        },
        "question13": {
            "question": "Which is a major source of methane emissions? (UPSC 2021)",
            "options": ["Automobile exhausts", "Paddy fields", "Industrial effluents", "Thermal power plants"],
            "answer": "Paddy fields"
        },
        "question14": {
            "question": "The ‘Kigali Amendment’ is related to which international agreement? (UPSC 2022)",
            "options": ["Paris Agreement", "Montreal Protocol", "Kyoto Protocol", "Bonn Convention"],
            "answer": "Montreal Protocol"
        },
        "question15": {
            "question": "Which was India’s first satellite launched into space? (UPSC 2020)",
            "options": ["Aryabhata", "INSAT-1A", "Rohini", "Chandrayaan-1"],
            "answer": "Aryabhata"
        },
        "question16": {
            "question": "Who was associated with the ‘Ghadar Movement’ during the Indian freedom struggle? (UPSC 2019)",
            "options": ["Lala Hardayal", "Bal Gangadhar Tilak", "Bipin Chandra Pal", "Aurobindo Ghosh"],
            "answer": "Lala Hardayal"
        },
        "question17": {
            "question": "What is the largest source of electricity generation in India? (UPSC 2021)",
            "options": ["Hydroelectric power", "Thermal power", "Nuclear power", "Solar power"],
            "answer": "Thermal power"
        },
        "question18": {
            "question": "The term ‘Base Erosion and Profit Shifting’ (BEPS) relates to? (UPSC 2020)",
            "options": ["Climate change mitigation", "Tax avoidance strategies", "Soil conservation", "Digital regulation"],
            "answer": "Tax avoidance strategies"
        },
        "question19": {
            "question": "Which statement is correct about the ‘International Solar Alliance’? (UPSC 2022)",
            "options": ["Launched by India and France", "Headquartered in New York", "Focuses on nuclear energy", "Excludes tropical countries"],
            "answer": "Launched by India and France"
        },
        "question20": {
            "question": "Which of these pairs is correctly matched? 1. Dampa Tiger Reserve – Mizoram 2. Satkosia Tiger Reserve – Odisha 3. Pilibhit Tiger Reserve – Uttar Pradesh (UPSC 2022)",
            "options": ["Only one pair", "Only two pairs", "All three pairs", "None"],
            "answer": "All three pairs"
        },
        "question21": {
            "question": "Which of the following was a feature of the Government of India Act, 1935? (UPSC 2018)",
            "options": ["Complete independence", "Provincial autonomy", "Abolition of princely states", "Direct elections for all"],
            "answer": "Provincial autonomy"
        },
        "question22": {
            "question": "The ‘Dandi Salt March’ was a protest against which tax? (UPSC 2017)",
            "options": ["Land revenue tax", "Salt tax", "Income tax", "Education tax"],
            "answer": "Salt tax"
        },
        "question23": {
            "question": "Which is a biodiversity hotspot in India? (UPSC 2019)",
            "options": ["Western Ghats", "Thar Desert", "Gangetic Plain", "Deccan Plateau"],
            "answer": "Western Ghats"
        },
        "question24": {
            "question": "The Finance Commission of India is constituted under which Article? (UPSC 2016)",
            "options": ["Article 280", "Article 324", "Article 356", "Article 370"],
            "answer": "Article 280"
        },
        "question25": {
            "question": "Which of the following is a peninsular river of India? (UPSC 2015)",
            "options": ["Ganga", "Krishna", "Brahmaputra", "Yamuna"],
            "answer": "Krishna"
        },
        "question26": {
            "question": "Which Viceroy partitioned Bengal in 1905? (UPSC 2014)",
            "options": ["Lord Curzon", "Lord Ripon", "Lord Dalhousie", "Lord Minto"],
            "answer": "Lord Curzon"
        },
        "question27": {
            "question": "The ‘Montagu-Chelmsford Reforms’ introduced which system in India? (UPSC 2013)",
            "options": ["Dyarchy", "Federalism", "Direct Rule", "Complete Autonomy"],
            "answer": "Dyarchy"
        },
        "question28": {
            "question": "Which state is the largest producer of coal in India? (UPSC 2012)",
            "options": ["Jharkhand", "Odisha", "Chhattisgarh", "West Bengal"],
            "answer": "Jharkhand"
        },
        "question29": {
            "question": "The ‘Panchsheel Agreement’ was signed between India and which country? (UPSC 2011)",
            "options": ["China", "Pakistan", "Nepal", "Bhutan"],
            "answer": "China"
        },
        "question30": {
            "question": "Which of the following is NOT a Fundamental Right in the Indian Constitution? (UPSC 2010)",
            "options": ["Right to Equality", "Right to Property", "Right to Freedom", "Right to Education"],
            "answer": "Right to Property"
        },
        "question31": {
            "question": "The ‘Quit India Movement’ was launched in which year? (UPSC 2012)",
            "options": ["1940", "1942", "1945", "1947"],
            "answer": "1942"
        },
        "question32": {
            "question": "Which of the following is a tributary of the Ganga? (UPSC 2013)",
            "options": ["Godavari", "Yamuna", "Krishna", "Kaveri"],
            "answer": "Yamuna"
        },
        "question33": {
            "question": "The ‘National Food Security Act’ was enacted in which year? (UPSC 2014)",
            "options": ["2010", "2011", "2013", "2015"],
            "answer": "2013"
        },
        "question34": {
            "question": "Which gas is primarily responsible for ozone depletion? (UPSC 2015)",
            "options": ["Carbon Dioxide", "Methane", "Chlorofluorocarbons", "Nitrous Oxide"],
            "answer": "Chlorofluorocarbons"
        },
        "question35": {
            "question": "The ‘Human Development Index’ is published by which organization? (UPSC 2016)",
            "options": ["World Bank", "IMF", "UNDP", "WTO"],
            "answer": "UNDP"
        },
        "question36": {
            "question": "Which movement was led by Vallabhbhai Patel in Gujarat? (UPSC 2017)",
            "options": ["Bardoli Satyagraha", "Champaran Satyagraha", "Kheda Satyagraha", "Dandi Salt March"],
            "answer": "Bardoli Satyagraha"
        },
        "question37": {
            "question": "Which of the following is a major port on the west coast of India? (UPSC 2018)",
            "options": ["Kolkata", "Mumbai", "Chennai", "Visakhapatnam"],
            "answer": "Mumbai"
        },
        "question38": {
            "question": "The ‘Election Commission of India’ was established under which Article? (UPSC 2019)",
            "options": ["Article 324", "Article 356", "Article 368", "Article 370"],
            "answer": "Article 324"
        },
        "question39": {
            "question": "The ‘Mahatma Gandhi National Rural Employment Guarantee Act’ guarantees how many days of employment? (UPSC 2020)",
            "options": ["50 days", "100 days", "150 days", "200 days"],
            "answer": "100 days"
        },
        "question40": {
            "question": "Which of the following is a non-renewable resource? (UPSC 2021)",
            "options": ["Wind", "Coal", "Solar", "Hydropower"],
            "answer": "Coal"
        },
        "question41": {
            "question": "The ‘Revolt of 1857’ began in which city? (UPSC 2010)",
            "options": ["Meerut", "Delhi", "Kanpur", "Lucknow"],
            "answer": "Meerut"
        },
        "question42": {
            "question": "Which mountain range separates the Indo-Gangetic plain from the Deccan Plateau? (UPSC 2011)",
            "options": ["Himalayas", "Vindhyas", "Satpuras", "Aravallis"],
            "answer": "Vindhyas"
        },
        "question43": {
            "question": "The ‘Right to Information Act’ was passed in which year? (UPSC 2012)",
            "options": ["2002", "2005", "2008", "2010"],
            "answer": "2005"
        },
        "question44": {
            "question": "Which of the following is a keystone species in India? (UPSC 2013)",
            "options": ["Tiger", "Elephant", "Peacock", "Crocodile"],
            "answer": "Tiger"
        },
        "question45": {
            "question": "The ‘INS Vikrant’ is associated with which branch of the Indian armed forces? (UPSC 2014)",
            "options": ["Army", "Navy", "Air Force", "Coast Guard"],
            "answer": "Navy"
        },
        "question46": {
            "question": "The ‘Champaran Satyagraha’ was related to which issue? (UPSC 2015)",
            "options": ["Indigo farmers", "Salt tax", "Land revenue", "Textile boycott"],
            "answer": "Indigo farmers"
        },
        "question47": {
            "question": "Which of the following is a volcanic island in India? (UPSC 2016)",
            "options": ["Andaman Islands", "Lakshadweep", "Diu", "Minicoy"],
            "answer": "Andaman Islands"
        },
        "question48": {
            "question": "The ‘Directive Principles of State Policy’ are borrowed from the Constitution of which country? (UPSC 2017)",
            "options": ["USA", "UK", "Ireland", "Canada"],
            "answer": "Ireland"
        },
        "question49": {
            "question": "The ‘Bharat Ratna’ is India’s highest civilian award. Who was its first recipient? (UPSC 2018)",
            "options": ["Jawaharlal Nehru", "C. Rajagopalachari", "Sardar Patel", "B.R. Ambedkar"],
            "answer": "C. Rajagopalachari"
        },
        "question50": {
            "question": "Which of the following is a primary air pollutant? (UPSC 2019)",
            "options": ["Ozone", "Sulphur Dioxide", "Carbon Monoxide", "Both 2 and 3"],
            "answer": "Both 2 and 3"
        },
        "question51": {
            "question": "Which of the following was a demand of the Non-Cooperation Movement? (UPSC 2020)",
            "options": ["Complete Independence", "Dominion Status", "Boycott of foreign goods", "Abolition of zamindari"],
            "answer": "Boycott of foreign goods"
        },
        "question52": {
            "question": "The ‘Sunderbans’ is famous for which animal? (UPSC 2021)",
            "options": ["Bengal Tiger", "Asian Elephant", "Indian Rhino", "Snow Leopard"],
            "answer": "Bengal Tiger"
        },
        "question53": {
            "question": "Which Article of the Constitution provides for the formation of new states? (UPSC 2022)",
            "options": ["Article 1", "Article 3", "Article 5", "Article 10"],
            "answer": "Article 3"
        },
        "question54": {
            "question": "The ‘NITI Aayog’ replaced which earlier body in India? (UPSC 2023)",
            "options": ["Planning Commission", "Finance Commission", "Election Commission", "Law Commission"],
            "answer": "Planning Commission"
        },
        "question55": {
            "question": "Which of the following is a renewable source of energy? (UPSC 2010)",
            "options": ["Coal", "Natural Gas", "Solar Energy", "Nuclear Energy"],
            "answer": "Solar Energy"
        },
        "question56": {
            "question": "The ‘Battle of Plassey’ was fought in which year? (UPSC 2011)",
            "options": ["1757", "1764", "1775", "1780"],
            "answer": "1757"
        },
        "question57": {
            "question": "Which state has the longest coastline in India? (UPSC 2012)",
            "options": ["Gujarat", "Tamil Nadu", "Andhra Pradesh", "Maharashtra"],
            "answer": "Gujarat"
        },
        "question58": {
            "question": "The ‘Goods and Services Tax’ (GST) was implemented in India in which year? (UPSC 2018)",
            "options": ["2015", "2016", "2017", "2018"],
            "answer": "2017"
        },
        "question59": {
            "question": "Which of the following is a critically endangered species in India? (UPSC 2019)",
            "options": ["Indian Elephant", "Gharial", "Bengal Tiger", "Asiatic Lion"],
            "answer": "Gharial"
        },
        "question60": {
            "question": "The ‘Large Hadron Collider’ is associated with which field of science? (UPSC 2020)",
            "options": ["Particle Physics", "Astronomy", "Genetics", "Geology"],
            "answer": "Particle Physics"
        },
        "question61": {
            "question": "Which of the following was the first Governor-General of India? (UPSC 2010)",
            "options": ["Warren Hastings", "Lord Dalhousie", "Lord Canning", "Lord Curzon"],
            "answer": "Warren Hastings"
        },
        "question62": {
            "question": "The ‘Kyoto Protocol’ primarily focuses on reducing emissions of which type of gases? (UPSC 2011)",
            "options": ["Ozone-depleting gases", "Greenhouse gases", "Sulfur oxides", "Nitrogen oxides"],
            "answer": "Greenhouse gases"
        },
        "question63": {
            "question": "Which of the following is a UNESCO World Heritage Site in India? (UPSC 2012)",
            "options": ["Taj Mahal", "Red Fort", "Qutub Minar", "All of the above"],
            "answer": "All of the above"
        },
        "question64": {
            "question": "The ‘Swadeshi Movement’ was launched in response to which event? (UPSC 2013)",
            "options": ["Partition of Bengal", "Rowlatt Act", "Jallianwala Bagh Massacre", "Non-Cooperation Movement"],
            "answer": "Partition of Bengal"
        },
        "question65": {
            "question": "Which of the following is the highest peak in South India? (UPSC 2014)",
            "options": ["Doddabetta", "Anamudi", "Kalsubai", "Mahendragiri"],
            "answer": "Anamudi"
        },
        "question66": {
            "question": "The ‘Public Accounts Committee’ of the Indian Parliament is chaired by a member of which group? (UPSC 2015)",
            "options": ["Ruling Party", "Opposition Party", "Independent Members", "Nominated Members"],
            "answer": "Opposition Party"
        },
        "question67": {
            "question": "Which of the following is a cash crop in India? (UPSC 2016)",
            "options": ["Rice", "Wheat", "Cotton", "Maize"],
            "answer": "Cotton"
        },
        "question68": {
            "question": "The ‘Chipko Movement’ was associated with the conservation of which resource? (UPSC 2017)",
            "options": ["Water", "Forests", "Soil", "Wildlife"],
            "answer": "Forests"
        },
        "question69": {
            "question": "Which of the following is India’s first nuclear reactor? (UPSC 2018)",
            "options": ["Apsara", "Dhruva", "Kamini", "Cirus"],
            "answer": "Apsara"
        },
        "question70": {
            "question": "The ‘Treaty of Sugauli’ was signed between Britain and which country? (UPSC 2019)",
            "options": ["India", "Nepal", "Bhutan", "Myanmar"],
            "answer": "Nepal"
        },
        "question71": {
            "question": "Which of the following is a major source of irrigation in India? (UPSC 2020)",
            "options": ["Canals", "Tanks", "Wells", "All of the above"],
            "answer": "All of the above"
        },
        "question72": {
            "question": "The ‘National Green Tribunal’ was established in which year? (UPSC 2021)",
            "options": ["2008", "2010", "2012", "2014"],
            "answer": "2010"
        },
        "question73": {
            "question": "Which of the following is a folk dance of Assam? (UPSC 2022)",
            "options": ["Bihu", "Garba", "Kathakali", "Lavani"],
            "answer": "Bihu"
        },
        "question74": {
            "question": "The ‘Asian Development Bank’ is headquartered in which city? (UPSC 2023)",
            "options": ["Manila", "Tokyo", "Beijing", "Singapore"],
            "answer": "Manila"
        },
        "question75": {
            "question": "Which of the following was a key demand of the ‘Civil Disobedience Movement’? (UPSC 2010)",
            "options": ["Abolition of salt tax", "Complete independence", "Dominion status", "End of untouchability"],
            "answer": "Abolition of salt tax"
        },
        "question76": {
            "question": "The ‘Great Barrier Reef’ is located off the coast of which country? (UPSC 2011)",
            "options": ["Australia", "Indonesia", "Philippines", "Malaysia"],
            "answer": "Australia"
        },
        "question77": {
            "question": "Which of the following is a Kharif crop? (UPSC 2012)",
            "options": ["Wheat", "Barley", "Rice", "Mustard"],
            "answer": "Rice"
        },
        "question78": {
            "question": "The ‘Fundamental Duties’ were added to the Indian Constitution by which amendment? (UPSC 2013)",
            "options": ["42nd Amendment", "44th Amendment", "46th Amendment", "52nd Amendment"],
            "answer": "42nd Amendment"
        },
        "question79": {
            "question": "Which of the following is a national park in Rajasthan? (UPSC 2014)",
            "options": ["Ranthambore", "Jim Corbett", "Kaziranga", "Sundarbans"],
            "answer": "Ranthambore"
        },
        "question80": {
            "question": "The ‘International Monetary Fund’ was established in which year? (UPSC 2015)",
            "options": ["1944", "1947", "1950", "1955"],
            "answer": "1944"
        },
        "question81": {
            "question": "Which of the following was the first woman Governor of an Indian state? (UPSC 2016)",
            "options": ["Sarojini Naidu", "Vijayalakshmi Pandit", "Indira Gandhi", "Sucheta Kripalani"],
            "answer": "Sarojini Naidu"
        },
        "question82": {
            "question": "The ‘Census of India’ is conducted every how many years? (UPSC 2017)",
            "options": ["5 years", "10 years", "15 years", "20 years"],
            "answer": "10 years"
        },
        "question83": {
            "question": "Which of the following is a tributary of the Brahmaputra? (UPSC 2018)",
            "options": ["Subansiri", "Kosi", "Gandak", "Sone"],
            "answer": "Subansiri"
        },
        "question84": {
            "question": "The ‘National Rural Livelihood Mission’ was launched in which year? (UPSC 2019)",
            "options": ["2008", "2010", "2011", "2013"],
            "answer": "2011"
        },
        "question85": {
            "question": "Which of the following is a greenhouse gas emitted from agricultural activities? (UPSC 2020)",
            "options": ["Carbon Dioxide", "Methane", "Nitrous Oxide", "All of the above"],
            "answer": "All of the above"
        },
        "question86": {
            "question": "The ‘Simon Commission’ was boycotted in India because? (UPSC 2021)",
            "options": ["It had no Indian members", "It proposed partition", "It supported untouchability", "It opposed independence"],
            "answer": "It had no Indian members"
        },
        "question87": {
            "question": "Which of the following is the largest desert in India? (UPSC 2022)",
            "options": ["Thar Desert", "Rann of Kutch", "Ladakh Desert", "Deccan Desert"],
            "answer": "Thar Desert"
        },
        "question88": {
            "question": "The ‘Digital India’ initiative was launched in which year? (UPSC 2023)",
            "options": ["2014", "2015", "2016", "2017"],
            "answer": "2015"
        },
        "question89": {
            "question": "Which of the following is a classical dance form of Kerala? (UPSC 2010)",
            "options": ["Kathak", "Bharatanatyam", "Kathakali", "Odissi"],
            "answer": "Kathakali"
        },
        "question90": {
            "question": "The ‘World Trade Organization’ was established in which year? (UPSC 2011)",
            "options": ["1990", "1995", "2000", "2005"],
            "answer": "1995"
        },
        "question91": {
            "question": "Which of the following was a leader of the ‘Home Rule Movement’? (UPSC 2012)",
            "options": ["Annie Besant", "Lala Lajpat Rai", "Gopal Krishna Gokhale", "Jawaharlal Nehru"],
            "answer": "Annie Besant"
        },
        "question92": {
            "question": "The ‘Coral Triangle’ is located in which region? (UPSC 2013)",
            "options": ["Southeast Asia", "Caribbean Sea", "Mediterranean Sea", "South Pacific"],
            "answer": "Southeast Asia"
        },
        "question93": {
            "question": "Which of the following is a scheme for rural electrification in India? (UPSC 2014)",
            "options": ["PM-KISAN", "Deen Dayal Upadhyaya Gram Jyoti Yojana", "Ujjwala Yojana", "Ayushman Bharat"],
            "answer": "Deen Dayal Upadhyaya Gram Jyoti Yojana"
        },
        "question94": {
            "question": "The ‘Gulf Stream’ is a warm ocean current in which ocean? (UPSC 2015)",
            "options": ["Pacific Ocean", "Atlantic Ocean", "Indian Ocean", "Arctic Ocean"],
            "answer": "Atlantic Ocean"
        },
        "question95": {
            "question": "Which of the following is a major tea-producing state in India? (UPSC 2016)",
            "options": ["Assam", "Punjab", "Haryana", "Gujarat"],
            "answer": "Assam"
        },
        "question96": {
            "question": "The ‘Paris Agreement’ aims to limit global temperature rise to below how many degrees Celsius? (UPSC 2017)",
            "options": ["1.5°C", "2°C", "2.5°C", "3°C"],
            "answer": "2°C"
        },
        "question97": {
            "question": "Which of the following is a site of the Indus Valley Civilization? (UPSC 2018)",
            "options": ["Harappa", "Mohenjo-Daro", "Lothal", "All of the above"],
            "answer": "All of the above"
        },
        "question98": {
            "question": "The ‘National Disaster Management Authority’ was established under which act? (UPSC 2019)",
            "options": ["Disaster Management Act, 2005", "Environment Protection Act, 1986", "Wildlife Protection Act, 1972", "Forest Conservation Act, 1980"],
            "answer": "Disaster Management Act, 2005"
        },
        "question99": {
            "question": "Which of the following is a major manganese-producing state in India? (UPSC 2020)",
            "options": ["Odisha", "Kerala", "Punjab", "Uttarakhand"],
            "answer": "Odisha"
        },
        "question100": {
            "question": "The ‘Bretton Woods Conference’ led to the establishment of which institutions? (UPSC 2021)",
            "options": ["IMF and World Bank", "UN and WHO", "WTO and ILO", "UNESCO and UNICEF"],
            "answer": "IMF and World Bank"
        }
    
};

// Shuffle array function
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

let questions = Object.values(quizData);
let currentQuestion = 0;
let score = 0;
let timer;
let timeLeft = 60;
let userAnswers = [];

const startScreenEl = document.getElementById('start-screen');
const startBtn = document.getElementById('start-btn');
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const submitBtn = document.getElementById('submit');
const quitBtn = document.getElementById('quit');
const timeEl = document.getElementById('time');
const quizEl = document.getElementById('quiz');
const resultEl = document.getElementById('result');
const scoreEl = document.getElementById('score');
const answersEl = document.getElementById('answers');
const restartBtn = document.getElementById('restart');
const progressEl = document.getElementById('progress');
const attemptedEl = document.getElementById('attempted');

function startQuiz() {
    questions = shuffleArray(Object.values(quizData));
    startScreenEl.classList.add('hidden');
    quizEl.classList.remove('hidden');
    loadQuestion();
}

function loadQuestion() {
    clearInterval(timer);
    timeLeft = 60;
    timeEl.textContent = timeLeft;
    startTimer();

    const q = questions[currentQuestion];
    questionEl.textContent = `${currentQuestion + 1}. ${q.question}`;
    optionsEl.innerHTML = '';
    const shuffledOptions = shuffleArray([...q.options]);
    shuffledOptions.forEach((option, index) => {
        const li = document.createElement('li');
        li.textContent = option;
        li.addEventListener('click', () => selectOption(li, option));
        optionsEl.appendChild(li);
    });
    updateProgress();
    submitBtn.disabled = false;
}

function selectOption(li, option) {
    optionsEl.querySelectorAll('li').forEach(el => el.classList.remove('selected'));
    li.classList.add('selected');
    userAnswers[currentQuestion] = option;
    updateProgress();
}

function startTimer() {
    timer = setInterval(() => {
        timeLeft--;
        timeEl.textContent = timeLeft;
        if (timeLeft <= 0) {
            clearInterval(timer);
            nextQuestion();
        }
    }, 1000);
}

function nextQuestion() {
    if (!userAnswers[currentQuestion]) {
        userAnswers[currentQuestion] = null;
    }
    currentQuestion++;
    if (currentQuestion < questions.length) {
        loadQuestion();
    } else {
        showResults();
    }
}

function updateProgress() {
    const attemptedCount = userAnswers.filter(answer => answer !== null && answer !== undefined).length;
    attemptedEl.textContent = attemptedCount;
    progressEl.textContent = `Questions: ${attemptedCount} / ${questions.length}`;
}

function showResults() {
    clearInterval(timer);
    quizEl.classList.add('hidden');
    resultEl.classList.remove('hidden');

    questions.forEach((q, i) => {
        if (userAnswers[i] === q.answer) score++;
    });
    scoreEl.textContent = `${score} / ${questions.length}`;

    answersEl.innerHTML = '';
    questions.forEach((q, i) => {
        const p = document.createElement('p');
        p.innerHTML = `${i + 1}. ${q.question}<br>
            Your Answer: ${userAnswers[i] || 'Not answered'}<br>
            Correct Answer: ${q.answer}`;
        if (userAnswers[i] === q.answer) {
            p.style.color = '#00cc00'; // Bright green for correct
        } else if (userAnswers[i]) {
            p.style.color = '#ff3333'; // Bright red for incorrect
        }
        answersEl.appendChild(p);
    });
}

startBtn.addEventListener('click', startQuiz);

submitBtn.addEventListener('click', () => {
    if (userAnswers[currentQuestion]) {
        submitBtn.disabled = true;
        nextQuestion();
    }
});

quitBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to quit the quiz?')) {
        showResults();
    }
});

restartBtn.addEventListener('click', () => {
    currentQuestion = 0;
    score = 0;
    userAnswers = [];
    questions = shuffleArray(Object.values(quizData));
    resultEl.classList.add('hidden');
    quizEl.classList.add('hidden');
    startScreenEl.classList.remove('hidden');
    attemptedEl.textContent = 0;
});